<div class='course-info row'>
  <div class='large-3 columns'>
    <h3> <%= link_to @quiz.course.title.upcase, course_path %> </h3>
  </div>
  <div class='large-9 columns'>
    <h3> <%= @quiz.title %> </h3>
  </div>
</div>

<% if @quiz.questions.any? %>
  <div class='quiz row'>
    <div class='large-3 columns'>
    </div>
    <div class='large-9 columns'>
      <div class='quiz-q'>
        <% @quiz.questions.each do |question| %>
          <h4><%= question.text %></h4>
          <% question.answers.pluck(:text).each do |answer| %>
            <%= answer %>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% if @quiz.course.user == current_user || current_user.admin? %>

<div class='row'>
  <div class='large-3 columns'>
    <h3>ADD A<br>NEW<br>QUESTION</h3>
  </div>
  <div class='large-9 columns'>
    <%= form_for [@quiz, @question] do |f| %>
      <% if @question.errors.any? %>
      <div id="error_explanation">
        <h3><%= pluralize(@question.errors.count, "error") %> prohibited this quiz from being submitted:</h3>
        <ul>
        <% @question.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
        </ul>
      </div>
    <% end %>
    <p>
      <%= f.label :text, "Question text" %><br>
      <%= f.text_field :text %>
    </p>
    <p>
      <%= fields_for "correct_answer", @question.answers.build do |answer| %>
        <%= answer.label :text, "Correct Answer" %><br>
        <%= answer.text_field :text %>
      <% end %>
    </p>

    <% @question.wrong_answers.each_with_index do |answer, i| %>
      <%= fields_for "wrong_answers[#{i}]", answer do |f| %>
        <p>
        <%= f.label :text, "Wrong Answer" %><br>
        <%= f.text_field :text %>
        </p>
      <% end %>
    <% end %>

    <%= f.submit 'CREATE QUESTION', class: 'button' %>
    <% end %>
  <% end %>
  </div>
</div>
